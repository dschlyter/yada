<!DOCTYPE html>

<html>
  <head>
    <title>Yet Another Debt App</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/css/yada.css">
    <link rel="shortcut icon" type="image/png" href="/public/img/favicon.png">
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0/angular-resource.js"></script>
    <script src="/public/app.js"></script>
  </head>

  <body ng-app="app">
    <div class="container" ng-controller="MainController">
      <h1>Yet Another Debt App</h1>

      <div class="row">
        <h2>Add new expense</h2>

        <form class="form-horizontal" role="form">
          <div class="alert alert-danger alert-dismissible" role="alert" ng-if="error">
            <button type="button" class="close" data-dismiss="alert">
              <span aria-hidden="true" ng-click="dismissError()">&times;</span><span class="sr-only">Close</span></button>
            <strong>Invalid input!</strong> {{error}}
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">User</label>
            <div class="col-sm-6">
              <select class="form-control" ng-model="newExpense.user">
                <option ng-repeat="user in users" value="{{$index + 1}}">{{user}}</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Category</label>
            <div class="col-sm-6">
              <select class="form-control" 
                ng-model="newExpense.category" 
                ng-options="category for category in categories">
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Total</label>
            <div class="col-sm-6">
              <input class="form-control" type="number" ng-model="newExpense.totalAmount"/>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Description</label>
            <div class="col-sm-6">
              <input class="form-control" type="text" ng-model="newExpense.description"/>
            </div>
          </div>

          <!-- TODO fold out advanced -->

          <!-- TODO date -->

          <div class="form-group">
            <label class="col-sm-2 control-label">Owed</label>
            <div class="col-sm-6">
              <input class="form-control" type="number" ng-model="newExpense.owedAmount"/>
            </div>
          </div>

          <!-- TODO extra (ie. 10 kr more expensive) -->

          <!-- TODO percentage owed amount -->

          <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-6">
              <button type="button" class="btn btn-success" ng-click="submitExpense()">Add</button>
            </div>
          </div>
        </form>
      </div>

      <div class="row">
        <h2>History</h2>

        <table class="table table-striped">
          <thead>
            <tr>
              <th>Report Date</th>
              <th>Date</th>
              <th>User</th>
              <th>Category</th>
              <th>Desc</th>
              <th>Total</th>
              <th>Owed</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="expense in expenses">
              <td>{{expense.Date | date:'yyyy-MM-dd'}}</td>
              <td>{{expense.ReportDate | date:'yyyy-MM-dd'}}</td>
              <td>{{users[expense.User - 1]}}</td>
              <td>{{expense.Category}}</td>
              <td>{{expense.Description}}</td>
              <td>{{expense.TotalAmount}}</td>
              <td>{{expense.OwedAmount}}</td>
              <td>{{expense.Balance}}</td>
            </tr>
          </tbody>
        </table>
      </div>
  </body>
</html>
